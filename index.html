<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Split Payment</title>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="container">
        <header>
            <img src="images/FLW-logo.svg" alt="" class="logo">
            <nav>
                
                <ul class="show desktop">
                    <li><a class="active" href="#home">Home</a></li>
                    <li><a href="#news">Developers</a></li>
                    <li><a href="#contact">Blog</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </nav>
        </header>
    </div>
    <div class="bodytext">
    <section>
        <img src="images/rave.png" alt="" class="rave">
        <h1>Welcome to Rave split payment</h1>
            <p class="subhead">Kindly enter amount</p>
            <form>
                <script src="https://api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js"></script>
                <input type="number" id="amount" placeholder="e.g 50000" required="required">
                <button type="button" onClick="payWithRave()" class="button">Pay Now</button>
            
            </form>
            
            <script>
                const API_publicKey = "FLWPUBK_TEST-9070a8d235099f5ac7db26a0356e92b3-X";
            
                function payWithRave() {
                    var x = getpaidSetup({
                        PBFPubKey: API_publicKey,
                        customer_email: "user@example.com",
                        amount:document.getElementById("amount").value,
                        currency: "NGN",
                        txref: "rave-123456",
                        subaccounts: [
                          {
                            id: "RS_F1EC5985C24D45AD410199ECA6B72D3D",
                            
                            transaction_split_ratio:"7",
                            transaction_charge_type: "flat",
                            transaction_charge: "100"
                          },
                          
                          {
                            id: "RS_344DD49DB5D471EF565C897ECD67CD95",
                            transaction_split_ratio:"3",
                            transaction_charge_type: "flat",
                            transaction_charge: "100"
                          },
                          
                          
                        ],
                        meta: [{
                            metaname: "flightID",
                            metavalue: "AP1234"
                        }],
                        onclose: function() {},
                        callback: function(response) {
                            var txref = response.tx.txRef; // collect flwRef returned and pass to a 					server page to complete status check.
                            console.log("This is the response returned after a charge", response);
                            if (
                                response.tx.chargeResponseCode == "00" ||
                                response.tx.chargeResponseCode == "0"
                            ) {
                                location.replace("https://rave.flutterwave.com/dashboard/overview/total")
                            } else {
                                alert("Error, re-enter amount or call our hotline")
                            }
            
                            x.close(); // use this to close the modal immediately after payment.
                        }
                    });
                }
            </script>
        </section>
    </div>
    <footer>
        <div class="footer-container">
            <div class="container">
            <a href="#"> 
            </a>
                <h1> <br>Lagos</h1> <br>
                <p>8 Providence Street Lekki Phase 1</p>
                <ul class="footer-links">
                    <li><a href="#">Terms of services</a></li>
                    <li><a href="#">Privacy</a></li>
                </ul>
           
            </div>
        </div>
    </footer>
</body>
</html>